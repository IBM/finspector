"use strict";(self.webpackChunkfinspector_js=self.webpackChunkfinspector_js||[]).push([[796],{168:(e,t,l)=>{function a(e,t){var l={name:t.cat_col,value:Array.from(new Set(e.map((e=>e[t.cat_col])))).sort(d3.ascending)},a=d3.scaleOrdinal().domain(l.value).range(d3.schemeTableau10);t.model_cols,function(e){d3.select(e).append("div").attr("id","categoryList");var t=d3.select(e).append("div").attr("class","vcontainer").style("display","flex").style("justify-content","center").style("align-items","flex-start").style("align-content","center");t.append("div").attr("id","colorLegend").style("position","absolute").style("left","50px"),t.append("div").attr("id","raincloud"),t.append("div").attr("id","table"),d3.select(e).append("div").attr("id","embedding_container").style("display","flex").style("justify-content","center").style("align-items","flex-start").style("align-content","center").append("div").attr("id","embedding")}(t.body_el);var i=d3.select(t.body_el).select("#raincloud").node(),s=d3.select(t.body_el).select("#table").node(),n=d3.select(t.body_el).select("#categoryList").node(),o=d3.select(t.body_el).select("#embedding").node(),c=new RainCloud(i,e,600,400,a,t,(function(t){var l=e.slice();Object.keys(t).forEach((function(e){l=l.filter((l=>l[e]>=t[e][0]&&l[e]<=t[e][1]))}));var a=l.map((t=>e.indexOf(t)));r.filterBy(l),c.filterBy(l),d.adjust_opacity_by_list(a)})),r=new Table(s,e,600,400,a,t,(function(e){c.highlight_item_by_index(e),d.highlight_item_by_index(e)})),d=(new Select(n,l,a,t,(function(t){c.highlight_category(t),r.highlight_category(t),d.highlight_category(t,e),function(e,t){d3.select("div#colorLegend").selectAll("*").remove();var l=d3.select("div#colorLegend").selectAll("div.colorLegend").data(e.sort(d3.ascending)).join("div").attr("class","colorLegend").style("width","200px").style("height","30px").style("display","flex").style("justify-content","center").style("align-items","flex-start").style("align-content","center");l.append("div").style("width","30px").style("height","30px").style("background",(e=>t(e))),l.append("div").style("position","left").style("width","150px").style("height","30px").style("line-height","30px").style("vertical-align","middle").style("text-anchor","left").style("padding-left","10px").text((e=>e))}(t,a)}),(function(e){c.augment_cat_and_spl(e)}),(function(e){c.show_item(e)})),new Project(o,t.embedding,1200,400,t,a,(function(e){c.highlight_item_by_index(e),r.highlight_item_by_index(e)}),(function(t){var l=e.filter(((e,l)=>t.indexOf(l)>=0));c.filterBy(l);var a=l.length>0?l:e.slice();r.filterBy(a),d.highlight_items_by_list_of_indices(t)})))}l.r(t),l.d(t,{DashBoard:()=>a})},796:(e,t,l)=>{l.r(t),l.d(t,{VisualizationModel:()=>y,VisualizationView:()=>g,version:()=>u.i8});var a=l(672),i=l(226),s=l(806),n=l.n(s);l(982),window.jQuery=n(),window.$=n();var o=l(986),c=l(168),r=l(524),d=l(303),p=l(869),h=l(675);window.d3=i,window.lasso=o.lasso,window.DashBoard=c.DashBoard,window.RainCloud=r.RainCloud,window.Table=d.Table,window.Select=p.Select,window.Project=h.Project;class y extends a.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"VisualizationModel",_view_name:"VisualizationView",_model_module:"finspector_js",_view_module:"finspector_js",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:"",textValue:"",data:[],embedding:[],props:{},inputValue:{},sent_col:"",cat_col:"",spl_col:"",model_cols:[],other_cols:[]}}}class g extends a.DOMWidgetView{render(){this.value_changed(),this._valueInput=document.createElement("input"),this._valueInput.type="text",this._valueInput.id=`_hiddenVALUE${this.model.model_id}`,this._valueInput.style.display="none",this._valueInput.value=this.model.get("textValue"),this._valueInput.oninput=this.value_input_changed.bind(this),this.el.appendChild(this._valueInput),this.model.on("change:inputValue",this.iv_changed,this),this.inputValue={sent:""}}iv_change=async function(){for(;0===Object.keys(this.model.get("inputValue")).length||this.model.get("inputValue").sent!=this.model.get("textValue");)await e(1e3);function e(e){return new Promise((t=>{e=e||2e3,setTimeout((function(){t()}),e)}))}};value_changed(){this.el.textContent=this.model.get("textValue");var e=this.model.get("data");i.select(this.el).selectAll("*:not(#_hiddenVALUE"+this.model.model_id+")").remove();var t={body_el:this.el,sent_col:this.model.get("sent_col"),cat_col:this.model.get("cat_col"),spl_col:this.model.get("spl_col"),model_cols:this.model.get("model_cols"),other_cols:this.model.get("other_cols"),model_id:this.model.model_id,embedding:this.model.get("embedding"),model:this.model};new DashBoard(e,t)}value_input_changed(){this.model.set("textValue",this._valueInput.value),this.model.save_changes()}}const u={i8:"0.1.0"}},986:(e,t,l)=>{function a(e){return"M"+e.map((function(e){return e.join(",")})).join("L")}function i(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function s(){var e=d3.dispatch("start","end");function t(l){l.node().getBoundingClientRect();var s,n,o,c=l.append("g").attr("class","lasso-group"),r=c.append("rect").attr("width",l.attr("width")).attr("height",l.attr("height")).attr("fill","tomato").attr("opacity",0),d=d3.drag().on("start",(function(l){var a=[l.x,l.y];s=[a],n&&n.remove(),n=c.append("path").attr("fill","#8cff32").attr("fill-opacity",.25).attr("stroke","#8cff32").attr("stroke-dasharray","3, 3"),o=c.append("line").attr("x2",s[0][0]).attr("y2",s[0][1]).attr("stroke","#8cff32").attr("stroke-dasharray","3, 3").attr("opacity",0),e.call("start",t,s)})).on("drag",(function(e){var t=[e.x,e.y];s.push(t),n.attr("d",a(s)),i(s[0],s[s.length-1])<75?o.attr("x1",t[0]).attr("y1",t[1]).attr("opacity",1):o.attr("opacity",0)})).on("end",(function(l){o.remove(),o=null,i(s[0],s[s.length-1])<75?(n.attr("d",a(s)+"Z"),e.call("end",t,s)):(n.remove(),n=null,s=null)}));r.call(d),t.reset=function(){n&&(n.remove(),n=null),s=null,o&&(o.remove(),o=null)}}return t.on=function(l,a){return e.on(l,a),t},t}l.r(t),l.d(t,{lasso:()=>s})},675:(e,t,l)=>{function a(e,t,l,a,i,s,n,o){var c=this;if(d3.select(e).selectAll("*").remove(),c.data=t,c.vis_cols=i,c.colorCategoryScale=s,c.callback1=n,c.callback2=o,c.embbool=c.vis_cols.model.get("embbool"),c.lassoFiltered=!1,c.filtersApplied=!1,c.embbool){c.screen_width=l,c.screen_height=a,c.margin={left:100,top:50,right:50,bottom:50},c.width=c.screen_width-c.margin.left-c.margin.right,c.height=c.screen_height-c.margin.top-c.margin.bottom,c.radius=5,c.opacity=.15,c.x=d3.scaleLinear().domain(d3.extent(c.data,(e=>e[0]))).range([0,c.width]),c.y=d3.scaleLinear().domain(d3.extent(c.data,(e=>e[1]))).range([c.height,0]),c.jsonified_data=c.data.map(((e,t)=>({x:c.x(e[0]),y:c.y(e[1]),index:t}))),d3.select(e).append("div").style("text-align","center").style("font-weight","bold").text("Sentences Embedding"),c.svg=d3.select(e).style("width",c.screen_width+"px").style("height",c.screen_height+"px").append("svg").attr("width",c.screen_width).attr("height",c.screen_height).style("position","absolute").style("z-index",999).on("mousemove",(e=>{var t=d3.pointer(e),l=c.findClosest(t);c.highlight_item_by_index(l),c.callback1(l)})),c.dot=c.svg.selectAll(".dot").data(c.data).join("circle").attr("cx",(e=>c.x(e[0])+c.margin.left)).attr("cy",(e=>c.y(e[1])+c.margin.top)).attr("r",c.radius).style("fill","black").style("opacity",c.opacity);var r=lasso().on("end",(function(e){var t=c.jsonified_data.filter((function(t,l){return d3.polygonContains(e,[t.x+c.margin.left,t.y+c.margin.top])})).map((e=>e.index));c.callback2(t),c.lassoFiltered=t.length>0}));c.svg.call(r)}}l.r(t),l.d(t,{Project:()=>a}),a.prototype.highlight_items_by_list_of_indices=function(e){var t=this;t.embbool&&t.dot.style("stroke-width",((t,l)=>e.indexOf(l)>=0?2:0)).style("stroke",((t,l)=>e.indexOf(l)>=0?"red":"none")).style("opacity",((l,a)=>e.indexOf(a)>=0?1:t.opacity))},a.prototype.adjust_opacity_by_list=function(e){var t=this;t.embbool&&(e.length==t.data.length&&(e=[]),e.length>0?t.filtersApplied=!0:t.filtersApplied=!1,t.dot.style("stroke-width",((t,l)=>e.indexOf(l)>=0?2:0)).style("stroke",((t,l)=>e.indexOf(l)>=0?"red":"none")).style("opacity",((l,a)=>e.indexOf(a)>=0?1:t.opacity)))},a.prototype.highlight_item_by_index=function(e){var t=this;!t.embbool||t.lassoFiltered||t.filtersApplied||t.dot.each((function(l,a){d3.select(this),d3.select(this).style("stroke-width",e==a?2:0).style("stroke",e==a?"red":"none"),t.filtersApplied||d3.select(this).style("opacity",e==a?1:t.opacity)}))},a.prototype.highlight_category=function(e,t){var l=this;e=e.slice(),l.embbool&&l.dot.style("opacity",((a,i)=>e.indexOf(t[i][l.vis_cols.cat_col])>=0?.75:l.opacity)).style("fill",((a,i)=>e.indexOf(t[i][l.vis_cols.cat_col])>=0?l.colorCategoryScale(t[i][l.vis_cols.cat_col]):"black"))},a.prototype.findClosest=function(e){var t=this,l=-1,a=2*t.radius;return t.data.forEach((function(i,s){var n=Math.sqrt(Math.pow(e[0]-t.margin.left-t.x(i[0]),2)+Math.pow(e[1]-t.margin.top-t.y(i[1]),2));n<=a&&(l=s,a=n)})),l}},524:(e,t,l)=>{function a(e,t,l,a,i,s,n){var o=this;d3.select(e).selectAll("svg").remove(),o.data=t,o.model_list=s.model_cols,o.colorCategoryScale=i,o.vis_cols=s,o.callback=n,o.threshold=20,o.rectHeight=20,o.brushed_ranges={},o.selected_category=[],o.filtersApplied=!1,o.screen_width=l,o.screen_height=a,o.margin={left:100,top:50,right:50,bottom:50},o.width=o.screen_width-o.margin.left-o.margin.right,o.height=o.screen_height-o.margin.top-o.margin.bottom,d3.select(e).append("div").style("text-align","center").style("font-weight","bold").text("Distributions of Mean Log Probabilities"),o.svg=d3.select(e).append("svg").attr("width",o.screen_width).attr("height",o.screen_height).append("g").attr("transform","translate("+o.margin.left+","+o.margin.top+")"),o.draw_raincloud()}l.r(t),l.d(t,{RainCloud:()=>a}),a.prototype.brushended=function(e,t){var l=this;if(e.sourceEvent){if(!e.selection)return delete l.brushed_ranges[t],void l.callback(l.brushed_ranges);l.brushed_ranges[t]=e.selection.map(l.scale_dict[t].invert),l.callback(l.brushed_ranges)}},a.prototype.draw_raincloud=function(){var e=this;e.svg.selectAll("*").remove(),e.allScoreMin=Math.floor(d3.min(e.data,(t=>d3.min(e.model_list.map((e=>t[e])))))),e.score_min_dict={},e.scale_dict={},e.bin_dict={},e.freq_max_dict={},e.q_dict={},e.brush_dict={},e.model_list.forEach((function(t){e.score_min_dict[t]=d3.min(e.data,(e=>e[t])),e.scale_dict[t]=d3.scaleLinear().domain([e.allScoreMin,0]).range([0,e.width]),e.bin_dict[t]=d3.bin().domain([e.allScoreMin,0]).thresholds(e.threshold).value((e=>e[t]))(e.data),e.freq_max_dict[t]=d3.max(e.bin_dict[t],(e=>e.length)),e.q_dict[t]=e.computeQuantiles(e.data.map((e=>e[t]))),e.q_dict[t][e.vis_cols.spl_col]={},e.q_dict[t][e.vis_cols.spl_col][0]=e.computeQuantiles(e.data.filter((e=>0==e.stereo_type)).map((e=>e[t]))),e.q_dict[t][e.vis_cols.spl_col][1]=e.computeQuantiles(e.data.filter((e=>1==e.stereo_type)).map((e=>e[t]))),e.colorCategoryScale.domain().forEach((l=>{var a=e.data.filter((t=>t[e.vis_cols.cat_col]==l)).slice();e.q_dict[t][l]=e.computeQuantiles(a.map((e=>e[t]))),e.q_dict[t][l][e.vis_cols.spl_col]={},e.q_dict[t][l][e.vis_cols.spl_col][0]=e.computeQuantiles(a.filter((e=>0==e.stereo_type)).map((e=>e[t]))),e.q_dict[t][l][e.vis_cols.spl_col][1]=e.computeQuantiles(a.filter((e=>1==e.stereo_type)).map((e=>e[t])))})),e.brush_dict[t]=d3.brushX().extent([[0,-10],[e.width,10]]).on("end",(l=>e.brushended(l,t)))})),e.allFreqMax=d3.max(Object.values(e.freq_max_dict)),e.scalePoint=d3.scalePoint().range([0,e.height]).domain(e.model_list).padding(.5),e.freqScale=d3.scaleLinear().domain([0,e.allFreqMax]).range([0,.5*-e.scalePoint.step()]),e.cloud_area_dict={},e.rectHeight=.1*e.scalePoint.step(),e.iqrArea=d3.area().x0((t=>e.scale_dict[t[0]](t[1]))).x1((t=>e.scale_dict[t[0]](t[3]))).y((t=>e.scalePoint(t[0]))),e.iqrLine=d3.line().x((t=>e.scale_dict[t[0]](t[2]))).y((t=>e.scalePoint(t[0]))),e.areaSpace=e.svg.selectAll("g.areaSpace").data(e.colorCategoryScale.domain()).join("g").attr("class","areaSpace").each((function(t,l){var a=e.model_list.map((l=>[l,e.q_dict[l][t].q1,e.q_dict[l][t].q2,e.q_dict[l][t].q3]));d3.select(this).append("path").attr("class","area:"+t).style("fill",e.colorCategoryScale(t)).style("stroke","none").style("opacity",.2).style("display","none").attr("d",e.iqrArea(a)),d3.select(this).append("path").attr("class","line:"+t).style("stroke",d3.rgb(e.colorCategoryScale(t)).darker()).style("fill","none").style("stroke-dasharray","2,2").style("opacity",.9).style("display","none").attr("d",e.iqrLine(a))})),e.axisSpace=e.svg.selectAll("g.axisSpace").data(e.model_list).join("g").attr("class","axisSpace").attr("transform",(function(t){return"translate(0, "+e.scalePoint(t)+")"})).each((function(t){d3.select(this).append("g").call(d3.axisBottom(e.scale_dict[t])),d3.select(this).append("text").attr("x",.1*-e.margin.left).style("dominant-baseline","middle").style("text-anchor","end").style("font-weight","bold").style("text-transform","uppercase").text(t),e.cloud_area_dict[t]=d3.area().curve(d3.curveNatural).x((l=>e.scale_dict[t]((l.x0+l.x1)/2))).y0(e.freqScale(0)).y1((t=>e.freqScale(t.length))),d3.select(this).append("path").attr("class","histCloud").attr("d",(l=>e.cloud_area_dict[t](e.bin_dict[t]))).style("opacity",.25),e.add_box_plot(d3.select(this),e.scale_dict[t],0,e.q_dict[t]),d3.select(this).append("g").attr("class","brush").call(e.brush_dict[t])})),e.line=d3.line().x((t=>e.scale_dict[t[0]](t[1]))).y((t=>e.scalePoint(t[0]))),e.pcpSpace=e.svg.append("g").attr("class","pcpSpace")},a.prototype.computeQuantiles=function(e){var t={};return t.q1=d3.quantile(e,.25),t.q2=d3.quantile(e,.5),t.q3=d3.quantile(e,.75),t.iqr=t.q3-t.q1,t.r0=Math.max(d3.min(e),t.q1-1.5*t.iqr),t.r1=Math.min(d3.max(e),t.q3+1.5*t.iqr),t},a.prototype.filterBy=function(e){var t=this;t.svg.selectAll("g.pcpSpace").remove(),e.length==t.data.length||0==e.length?t.filtersApplied=!1:(t.filtersApplied=!0,t.draw_pcp(e))},a.prototype.draw_pcp=function(e){var t=this;t.svg.selectAll("g.pcpSpace").remove(),t.pcpSpace=t.svg.append("g").attr("class","pcpSpace"),t.pcpPath=t.pcpSpace.selectAll("path.pcp").data(e).join("path").attr("class","pcp").style("fill","none").style("stroke-width",1).style("stroke",(e=>t.selected_category.indexOf(e[t.vis_cols.cat_col])>=0?t.colorCategoryScale(e[t.vis_cols.cat_col]):"grey")).style("opacity",.25).attr("d",(e=>t.line(t.model_list.map((t=>[t,e[t]])))))},a.prototype.highlight_item_by_index=function(e){var t=this;t.filtersApplied||0!=Object.values(t.brushed_ranges).length||t.draw_pcp(t.data.filter((t=>t.index==e))),t.pcpPath=t.pcpSpace.selectAll("path.pcp").style("opacity",(t=>t.index==e?.75:.25)).style("stroke-width",(t=>t.index==e?3:1))},a.prototype.highlight_category=function(e){var t=this;t.selected_category=e.slice(),t.svg.selectAll("path.pcp")._groups[0].length>0&&(t.pcpPath=t.pcpSpace.selectAll("path.pcp").style("stroke",(e=>t.selected_category.indexOf(e[t.vis_cols.cat_col])>=0?t.colorCategoryScale(e[t.vis_cols.cat_col]):"grey"))),t.areaSpace.selectAll("path[class*='line:']").style("display",(t=>e.indexOf(t)>=0?"inline":"none")),t.areaSpace.selectAll("path[class*='area:']").style("display",(t=>e.indexOf(t)>=0?"inline":"none"))},a.prototype.show_item=function(e){var t=this;t.pcpSpace.selectAll("path.pcp_temp").remove(),t.pcpSpace.append("path").attr("class","pcp_temp").style("fill","none").style("stroke-width",3).style("stroke","red").style("opacity",.8).attr("d",t.line(t.model_list.map((t=>[t,e[t].score]))))},a.prototype.augment_cat_and_spl=function(e){var t=this;t.axisSpace.selectAll("g.csSpace").remove();var l=0==e.spl.length,a=e.cat.length,i=.75;l?(t.axisSpace.selectAll("path.histCloud").style("display","inline"),t.areaSpace.style("display","inline")):(t.axisSpace.selectAll("path.histCloud").style("display","none"),t.areaSpace.style("display","none"),t.axisSpace.each((function(l,s){var n=d3.select(this).append("g").attr("class","csSpace");switch(n.selectAll("text.splLabel").data(["base","stereotype"]).join("text").attr("x",0).attr("y",((e,t)=>0==t?-20:20)).style("opacity",.15).style("font-size","200%").style("text-anchor","start").style("dominant-baseline",((e,t)=>0==t?"baseline":"hanging")).text((e=>e)),s<t.model_list.length-1&&n.append("line").attr("class","divider").attr("x1",0).attr("x2",t.width).attr("y1",t.scalePoint.step()/2).attr("y2",t.scalePoint.step()/2).style("stroke","grey").style("stroke-width",1.5).style("stroke-dasharray","1,1"),a){case 0:t.add_box_plot(n,t.scale_dict[l],-t.scalePoint.step()/4,t.q_dict[l][t.vis_cols.spl_col][0],"black",i,t.rectHeight/2),t.add_box_plot(n,t.scale_dict[l],t.scalePoint.step()/4,t.q_dict[l][t.vis_cols.spl_col][1],"black",i,t.rectHeight/2);case 1:e.cat.forEach((function(e,a){t.add_box_plot(n,t.scale_dict[l],-t.scalePoint.step()/4,t.q_dict[l][e][t.vis_cols.spl_col][0],t.colorCategoryScale(e),i,t.rectHeight/2),t.add_box_plot(n,t.scale_dict[l],t.scalePoint.step()/4,t.q_dict[l][e][t.vis_cols.spl_col][1],t.colorCategoryScale(e),i,t.rectHeight/2)}));default:var o=d3.scalePoint().domain(d3.range(a)).range([.6*t.scalePoint.step(),.9*t.scalePoint.step()]),c=d3.scalePoint().domain(d3.range(a)).range([.1*t.scalePoint.step(),.4*t.scalePoint.step()]);e.cat.forEach((function(e,a){t.add_box_plot(n,t.scale_dict[l],-t.scalePoint.step()+o(a),t.q_dict[l][e][t.vis_cols.spl_col][0],t.colorCategoryScale(e),i,t.rectHeight/2),t.add_box_plot(n,t.scale_dict[l],c(a),t.q_dict[l][e][t.vis_cols.spl_col][1],t.colorCategoryScale(e),i,t.rectHeight/2)}))}})))},a.prototype.add_box_plot=function(e,t,l,a,i,s,n){i=i||"black",s=s||.25,n=n||this.rectHeight,e.append("rect").attr("x",t(a.q1)).attr("y",l-n/2).attr("width",t(a.q3)-t(a.q1)).attr("height",n).style("fill",i).style("opacity",s),e.append("line").attr("x1",t(a.r0)).attr("x2",t(a.r1)).attr("y1",l).attr("y2",l).style("stroke",i).style("opacity",s),e.append("circle").attr("cx",t(a.q2)).attr("cy",l).attr("r",.25*n).style("stroke","white").style("fill",i).style("opacity",s)}},869:(e,t,l)=>{l.r(t),l.d(t,{Select:()=>c});var a=l(806),i=l.n(a),s=(l(982),l(379)),n=l.n(s),o=l(781);function c(e,t,l,a,i,s,n){var o=this;o.category_list=t,o.colorCategoryScale=l,o.vis_cols=a,o.callback1=i,o.callback2=s,o.callback3=n,o.select=d3.select(e),o.selectOption=o.select.append("div").style("display","flex").style("justify-content","center").style("align-items","flex-start").style("align-content","center"),o.selectSplit=o.select.append("div").style("display","flex").style("justify-content","center").style("align-items","flex-start").style("align-content","center"),o.selectOption.append("div").attr("class","titleDiv").style("height","40px").style("line-height","40px").style("vertical-align","middle").style("padding","2.5px").style("font-weight","bold").append("label").style("height","40px").style("line-height","40px").style("vertical-align","middle").style("padding","2.5px").text("Highlight with Colors: "),o.optionSpace=o.selectOption.selectAll("div.optionSpace").data(o.category_list.value).join("div").attr("class","optionSpace").style("height","40px").style("line-height","40px").style("vertical-align","middle").style("text-anchor","left").style("padding","2.5px"),o.optionSpace.append("input").attr("type","checkbox").attr("class","optionSpace").attr("name",(e=>e)).style("height","40px").style("line-height","40px").style("vertical-align","middle").style("padding","2.5px").attr("id",(e=>"input-"+e)),o.optionSpace.append("label").attr("for",(e=>"input-"+e)).style("height","40px").style("line-height","40px").style("vertical-align","middle").style("padding","2.5px").text((e=>e)),o.optionSpace.on("click",((e,t)=>{var l=Array.from(o.selectOption.selectAll("input[type=checkbox].optionSpace")._groups[0]).filter((e=>e.checked)).map((e=>e.name)),a=Array.from(o.selectSplit.selectAll("input[type=checkbox].splitSpace")._groups[0]).filter((e=>e.checked)).map((e=>e.name)),i={cat:l,spl:a};o.callback1(l),o.callback2(i)})),o.selectSplit.append("div").attr("class","titleDiv").style("height","40px").style("line-height","40px").style("vertical-align","middle").style("padding","2.5px").style("font-weight","bold").append("label").style("height","40px").style("line-height","40px").style("vertical-align","middle").style("padding","2.5px").text("Split Distributions: "),o.splitSpace=o.selectSplit.selectAll("div.splitSpace").data([o.vis_cols.spl_col]).join("div").attr("class","splitSpace").style("height","40px").style("line-height","40px").style("vertical-align","middle").style("text-anchor","left").style("padding","2.5px"),o.splitSpace.append("input").attr("type","checkbox").attr("class","splitSpace").attr("name",(e=>e)).style("height","40px").style("line-height","40px").style("vertical-align","middle").style("padding","2.5px").attr("id",(e=>"input-"+e)),o.splitSpace.append("label").attr("for",(e=>"input-"+e)).style("height","40px").style("line-height","40px").style("vertical-align","middle").style("padding","2.5px").text((e=>e)),o.splitSpace.on("click",((e,t)=>{var l=Array.from(o.selectOption.selectAll("input[type=checkbox].optionSpace")._groups[0]).filter((e=>e.checked)).map((e=>e.name)),a=Array.from(o.selectSplit.selectAll("input[type=checkbox].splitSpace")._groups[0]).filter((e=>e.checked)).map((e=>e.name)),i={cat:l,spl:a};o.callback2(i)})),o.vis_cols.model.get("inputelement")?(o.textSpace=o.select.append("div").style("height","40px").style("line-height","40px").style("padding","2.5px").style("display","flex").style("justify-content","center").style("align-items","flex-start").style("align-content","center"),o.textSpace.append("label").style("height","30px").style("line-height","30px").style("vertical-align","middle").style("padding","2.5px").style("font-weight","bold").text("Type a sentence (Max Chars: 500): "),o.textSpace.append("input").style("width","50%").style("height","30px").style("line-height","30px").style("vertical-align","middle").attr("type","text").attr("id","inputText").attr("name","inputText").attr("maxlength",1e3),o.textSpace.append("button").attr("class","btn btn-default").style("cursor","pointer").style("width","60px").style("height","30px").style("line-height","30px").style("vertical-align","middle").text("Submit").on("click",(()=>{var e=d3.select("input#inputText").node().value,t=d3.select("input#_hiddenVALUE"+o.vis_cols.model_id).node();t.value=e,t.dispatchEvent(new Event("input",{bubbles:!0})),o.broadcastInputValue()})),o.selectSpinner=o.textSpace.append("div").attr("class","spinner").style("position","absolute").style("right","50px").style("display","none").style("border","4px solid #f3f3f3").style("border-top","4px solid #3498db").style("border-radius","50%").style("width","20px").style("height","20px").style("-webkit-animation","spin 2s linear infinite").style("animation","spin 2s linear infinite").style("line-height","20px").style("padding","2.5px").style("justify-content","center").style("align-items","flex-start").style("align-content","center")):console.log(o.vis_cols.model.get("inputelement"))}n()(o.Z,{insert:"head",singleton:!1}),o.Z.locals,window.jQuery=i(),window.$=i(),c.prototype.broadcastInputValue=async function(){var e=this;for(e.selectSpinner.style("display","inline"),0==Object.keys(e.vis_cols.model.get("inputValue")).length&&await t(2e3);0===Object.keys(e.vis_cols.model.get("inputValue")).length||e.vis_cols.model.get("inputValue").sent!=e.vis_cols.model.get("textValue");)await t(1e3);function t(e){return new Promise((t=>{e=e||2e3,setTimeout((function(){t()}),e)}))}e.callback3(e.vis_cols.model.get("inputValue")),e.selectSpinner.style("display","none")}},303:(e,t,l)=>{function a(e,t,l,a,i,s,n){var o=this;d3.select(e).selectAll("*").remove(),o.data=t,o.keys=s.other_cols.concat([s.cat_col,s.sent_col]).concat(s.model_cols),o.colorCategoryScale=i,o.selected_category=[],o.vis_cols=s,o.callback=n,o.screen_width=l,o.screen_height=a,o.margin={left:100,top:50,right:50,bottom:50},o.width=o.screen_width-o.margin.left-o.margin.right,o.height=o.screen_height-o.margin.top-o.margin.bottom,d3.select(e).append("div").style("text-align","center").style("font-weight","bold").text("Table of Sentences"),o.table=d3.select(e).style("width",o.screen_width+"px").style("height",o.screen_height+"px").style("overflow","hidden auto").append("table").style("border-collapse","collapse").style("border","2px black solid").on("mouseleave",((e,t)=>{o.callback(-1)})),o.table.append("thead").append("tr").selectAll("th").data(o.keys).join("th").text((e=>e)).style("border","1px black solid").style("padding","5px").style("background-color","lightgray").style("font-weight","bold").style("font-size","80%").style("text-transform","uppercase"),o.rows=o.table.append("tbody").selectAll("tr").data(o.data).join("tr").attr("class","rows").style("background-color",(e=>o.selected_category.indexOf(e[o.vis_cols.cat_col])>=0?d3.rgb(o.colorCategoryScale(e[o.vis_cols.cat_col])).copy({opacity:.25}):"white")).on("mouseenter",((e,t)=>{o.callback(t.index)})),o.rows.selectAll("td").data((e=>o.keys.map((t=>e[t])))).join("td").style("border","1px black solid").style("padding","5px").style("font-size","12px").text((e=>isNaN(e)||Number.isInteger(e)?e:parseFloat(e).toFixed(3)))}l.r(t),l.d(t,{Table:()=>a}),a.prototype.filterBy=function(e){var t=this;t.rows=t.table.select("tbody").selectAll("tr.rows").data(e,(e=>e)).join((e=>e.append("tr").attr("class","rows").selectAll("td").data((e=>t.keys.map((t=>e[t])))).join("td").style("border","1px black solid").style("padding","5px").style("font-size","12px").text((e=>isNaN(e)||Number.isInteger(e)?e:parseFloat(e).toFixed(3)))),(e=>e.selectAll("td").data((e=>t.keys.map((t=>e[t])))).join("td").style("border","1px black solid").style("padding","5px").style("font-size","12px").text((e=>isNaN(e)||Number.isInteger(e)?e:parseFloat(e).toFixed(3)))),(e=>e.remove())),t.rows=t.table.selectAll("tr.rows").on("mouseenter",((e,l)=>{t.callback(l.index)})),t.table.selectAll("tr.rows").style("background-color",(e=>t.selected_category.indexOf(e[t.vis_cols.cat_col])>=0?d3.rgb(t.colorCategoryScale(e[t.vis_cols.cat_col])).copy({opacity:.25}):"white"))},a.prototype.highlight_category=function(e){var t=this;t.selected_category=e.slice(),t.rows=t.table.selectAll("tr.rows").style("background-color",(e=>t.selected_category.indexOf(e[t.vis_cols.cat_col])>=0?d3.rgb(t.colorCategoryScale(e[t.vis_cols.cat_col])).copy({opacity:.25}):"white"))},a.prototype.highlight_item_by_index=function(e){var t=this;if(-1!=e){var l=t.data[e][t.vis_cols.sent_col],a=!0;t.rows=t.table.selectAll("tr.rows").each((function(e){var i=d3.select(this);i.style("background-color","white"),e[t.vis_cols.sent_col]==l&&(i.style("background-color",d3.rgb(t.colorCategoryScale(e[t.vis_cols.cat_col])).copy({opacity:.25})),a&&(i.node().scrollIntoView({block:"nearest",inline:"nearest"}),a=!1))}))}else t.rows.style("background-color","white")}},781:(e,t,l)=>{l.d(t,{Z:()=>s});var a=l(645),i=l.n(a)()((function(e){return e[1]}));i.push([e.id,"/* Safari */\n@-webkit-keyframes spin {\n  0% { -webkit-transform: rotate(0deg); }\n  100% { -webkit-transform: rotate(360deg); }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}",""]);const s=i},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var l=e(t);return t[2]?"@media ".concat(t[2]," {").concat(l,"}"):l})).join("")},t.i=function(e,l,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var s=0;s<this.length;s++){var n=this[s][0];null!=n&&(i[n]=!0)}for(var o=0;o<e.length;o++){var c=[].concat(e[o]);a&&i[c[0]]||(l&&(c[2]?c[2]="".concat(l," and ").concat(c[2]):c[2]=l),t.push(c))}},t}},379:(e,t,l)=>{var a,i=function(){var e={};return function(t){if(void 0===e[t]){var l=document.querySelector(t);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch(e){l=null}e[t]=l}return e[t]}}(),s=[];function n(e){for(var t=-1,l=0;l<s.length;l++)if(s[l].identifier===e){t=l;break}return t}function o(e,t){for(var l={},a=[],i=0;i<e.length;i++){var o=e[i],c=t.base?o[0]+t.base:o[0],r=l[c]||0,d="".concat(c," ").concat(r);l[c]=r+1;var p=n(d),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==p?(s[p].references++,s[p].updater(h)):s.push({identifier:d,updater:u(h,t),references:1}),a.push(d)}return a}function c(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var s=l.nc;s&&(a.nonce=s)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var n=i(e.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}return t}var r,d=(r=[],function(e,t){return r[e]=t,r.filter(Boolean).join("\n")});function p(e,t,l,a){var i=l?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var s=document.createTextNode(i),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(s,n[t]):e.appendChild(s)}}function h(e,t,l){var a=l.css,i=l.media,s=l.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var y=null,g=0;function u(e,t){var l,a,i;if(t.singleton){var s=g++;l=y||(y=c(t)),a=p.bind(null,l,s,!1),i=p.bind(null,l,s,!0)}else l=c(t),a=h.bind(null,l,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(l)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var l=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<l.length;a++){var i=n(l[a]);s[i].references--}for(var c=o(e,t),r=0;r<l.length;r++){var d=n(l[r]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}l=c}}}}}]);